<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Universidad César Vallejo - Voice Widget Demo</title>

  <link rel="stylesheet" href="/assets/css/voice-widget.css">
  <style>
    html, body {
      height: 100%;
      margin: 0;
    }
    .ucv-frame {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      border: 0;
    }
  </style>
</head>
<body>
  <!-- Render principal: página guardada de UCV en un iframe de pantalla completa -->
  <iframe class="ucv-frame" src="/assets/css/ucv.html" title="Universidad César Vallejo"></iframe>

  <!-- Punto de montaje del widget -->
  <div id="voice-widget-root"></div>

  <!-- Entrada del widget procesado por Vite -->
  <script type="module" src="/src/voice-widget/main.js"></script>
  <script>
    // Quitar botón de chat de terceros dentro del iframe UCV (mismo origen)
    (function removeThirdPartyChat() {
      const iframe = document.querySelector('.ucv-frame');
      if (!iframe) return;
      function tryRemove() {
        try {
          const doc = iframe.contentWindow && iframe.contentWindow.document;
          if (!doc) return;
          const selectors = [
            '.mxg-launcher-btn',
            '.genesys-mxg-frame',
            '#genesys-mxg-frame',
            '#genesys-mxg-container-frame',
            '.genesys-app',
            '.cx-messenger-1qfeen',
          ];
          selectors.forEach(sel => {
            doc.querySelectorAll(sel).forEach(el => el.remove());
          });
          // También ocultar por si se reinyecta dinámicamente
          const style = doc.createElement('style');
          style.textContent = `
            .mxg-launcher-btn, .genesys-mxg-frame, #genesys-mxg-frame, #genesys-mxg-container-frame, .genesys-app { display: none !important; visibility: hidden !important; opacity: 0 !important; }
          `;
          doc.head.appendChild(style);
        } catch (e) { /* noop */ }
      }
      iframe.addEventListener('load', () => {
        let attempts = 0;
        const interval = setInterval(() => {
          attempts += 1;
          tryRemove();
          if (attempts > 20) clearInterval(interval);
        }, 500);
      });
    })();
  </script>
</body>
</html>


